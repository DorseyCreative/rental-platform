"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-business/route";
exports.ids = ["app/api/analyze-business/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-business%2Froute&page=%2Fapi%2Fanalyze-business%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-business%2Froute.ts&appDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-business%2Froute&page=%2Fapi%2Fanalyze-business%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-business%2Froute.ts&appDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_macdaddy_heavy_equipment_rental_rental_platform_src_app_api_analyze_business_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze-business/route.ts */ \"(rsc)/./src/app/api/analyze-business/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-business/route\",\n        pathname: \"/api/analyze-business\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-business/route\"\n    },\n    resolvedPagePath: \"/Users/macdaddy/heavy-equipment-rental/rental-platform/src/app/api/analyze-business/route.ts\",\n    nextConfigOutput,\n    userland: _Users_macdaddy_heavy_equipment_rental_rental_platform_src_app_api_analyze_business_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze-business/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLWJ1c2luZXNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplLWJ1c2luZXNzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZS1idXNpbmVzcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hY2RhZGR5JTJGaGVhdnktZXF1aXBtZW50LXJlbnRhbCUyRnJlbnRhbC1wbGF0Zm9ybSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYWNkYWRkeSUyRmhlYXZ5LWVxdWlwbWVudC1yZW50YWwlMkZyZW50YWwtcGxhdGZvcm0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNEM7QUFDekg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW50YWwtcGxhdGZvcm0vPzczMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hY2RhZGR5L2hlYXZ5LWVxdWlwbWVudC1yZW50YWwvcmVudGFsLXBsYXRmb3JtL3NyYy9hcHAvYXBpL2FuYWx5emUtYnVzaW5lc3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FuYWx5emUtYnVzaW5lc3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXplLWJ1c2luZXNzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXplLWJ1c2luZXNzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21hY2RhZGR5L2hlYXZ5LWVxdWlwbWVudC1yZW50YWwvcmVudGFsLXBsYXRmb3JtL3NyYy9hcHAvYXBpL2FuYWx5emUtYnVzaW5lc3Mvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl6ZS1idXNpbmVzcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-business%2Froute&page=%2Fapi%2Fanalyze-business%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-business%2Froute.ts&appDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze-business/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/analyze-business/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n\n\nconst API_KEY = process.env.ANTHROPIC_API_KEY || \"sk-WICMBClfK6IiaQxp9oyDFV0yubxqBBSuQaWD1pUSs94ZYIpC\";\nconst anthropic = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: API_KEY\n});\nfunction extractWebsiteContent(html) {\n    // Remove script and style tags\n    let content = html.replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, \"\");\n    content = content.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, \"\");\n    // Extract and prioritize important sections\n    const titleMatch = html.match(/<title[^>]*>(.*?)<\\/title>/i);\n    const h1Matches = html.match(/<h1[^>]*>(.*?)<\\/h1>/gi) || [];\n    const h2Matches = html.match(/<h2[^>]*>(.*?)<\\/h2>/gi) || [];\n    const metaDesc = html.match(/<meta[^>]*name=\"description\"[^>]*content=\"([^\"]*)\"[^>]*>/i);\n    // Build prioritized content\n    let prioritizedContent = \"\";\n    if (titleMatch) {\n        prioritizedContent += `TITLE: ${titleMatch[1].replace(/<[^>]*>/g, \"\")} `;\n    }\n    if (metaDesc) {\n        prioritizedContent += `DESCRIPTION: ${metaDesc[1]} `;\n    }\n    h1Matches.forEach((h1)=>{\n        prioritizedContent += `HEADING: ${h1.replace(/<[^>]*>/g, \"\")} `;\n    });\n    h2Matches.slice(0, 5).forEach((h2)=>{\n        prioritizedContent += `SUBHEADING: ${h2.replace(/<[^>]*>/g, \"\")} `;\n    });\n    // Extract all text content and clean up\n    content = content.replace(/<[^>]*>/g, \" \");\n    content = content.replace(/\\s+/g, \" \").trim();\n    // Combine prioritized content with body content\n    const combinedContent = prioritizedContent + \" CONTENT: \" + content;\n    // Return more content for better analysis (increased from 3000 to 5000)\n    return combinedContent.substring(0, 5000);\n}\nfunction extractBusinessFromContent(content, domain) {\n    const businessName = extractBusinessName(domain);\n    // Try to extract real info from content\n    const emailMatch = content.match(/[\\w\\.-]+@[\\w\\.-]+\\.\\w+/g);\n    const phoneMatch = content.match(/\\(?\\d{3}\\)?[-.\\s]?\\d{3}[-.\\s]?\\d{4}/g);\n    // Determine business type from content\n    let businessType = \"custom\";\n    if (content.toLowerCase().includes(\"excavator\") || content.toLowerCase().includes(\"bulldozer\") || content.toLowerCase().includes(\"crane\")) {\n        businessType = \"heavy_equipment\";\n    } else if (content.toLowerCase().includes(\"party\") || content.toLowerCase().includes(\"wedding\") || content.toLowerCase().includes(\"tent\")) {\n        businessType = \"party_rental\";\n    } else if (content.toLowerCase().includes(\"car\") || content.toLowerCase().includes(\"vehicle\") || content.toLowerCase().includes(\"truck\")) {\n        businessType = \"car_rental\";\n    } else if (content.toLowerCase().includes(\"tool\") || content.toLowerCase().includes(\"drill\") || content.toLowerCase().includes(\"saw\")) {\n        businessType = \"tool_rental\";\n    }\n    return {\n        name: businessName,\n        type: businessType,\n        industry: getIndustryForType(businessType),\n        email: emailMatch ? emailMatch[0] : `contact@${domain}`,\n        phone: phoneMatch ? phoneMatch[0] : \"+1-555-000-0000\",\n        address: \"Address available on website\",\n        description: `Professional ${businessType.replace(\"_\", \" \")} services`,\n        features: getFeaturesForType(businessType),\n        branding: {\n            primaryColor: getColorForType(businessType).primary,\n            secondaryColor: getColorForType(businessType).secondary\n        },\n        confidence: content.length > 500 ? 85 : 70,\n        customFields: getCustomFieldsForType(businessType)\n    };\n}\nfunction extractBusinessName(domain) {\n    return domain.replace(/^www\\./, \"\").replace(/\\.(com|net|org|biz|info)$/, \"\").split(\".\").map((word)=>word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n}\nfunction getIndustryForType(type) {\n    const industries = {\n        heavy_equipment: \"Construction Equipment Rental\",\n        party_rental: \"Event & Party Services\",\n        car_rental: \"Vehicle Rental Services\",\n        tool_rental: \"Tool & Equipment Rental\",\n        custom: \"Rental Services\"\n    };\n    return industries[type] || industries.custom;\n}\nfunction getFeaturesForType(type) {\n    const features = {\n        heavy_equipment: [\n            \"GPS Equipment Tracking\",\n            \"Maintenance Scheduling\",\n            \"Delivery Services\",\n            \"Operator Training\",\n            \"Safety Management\"\n        ],\n        party_rental: [\n            \"Event Planning\",\n            \"Setup Services\",\n            \"Delivery & Pickup\",\n            \"Inventory Management\",\n            \"Customer Portal\"\n        ],\n        car_rental: [\n            \"GPS Vehicle Tracking\",\n            \"Insurance Management\",\n            \"Mileage Monitoring\",\n            \"Digital Contracts\",\n            \"Mobile Check-in\"\n        ],\n        tool_rental: [\n            \"Tool Reservations\",\n            \"Safety Management\",\n            \"Maintenance Tracking\",\n            \"Quick Checkout\",\n            \"Inventory Control\"\n        ],\n        custom: [\n            \"Inventory Management\",\n            \"Customer Portal\",\n            \"Booking System\",\n            \"Payment Processing\"\n        ]\n    };\n    return features[type] || features.custom;\n}\nfunction getColorForType(type) {\n    const colors = {\n        heavy_equipment: {\n            primary: \"#FF6600\",\n            secondary: \"#003366\"\n        },\n        party_rental: {\n            primary: \"#E91E63\",\n            secondary: \"#673AB7\"\n        },\n        car_rental: {\n            primary: \"#2196F3\",\n            secondary: \"#FF9800\"\n        },\n        tool_rental: {\n            primary: \"#4CAF50\",\n            secondary: \"#FF5722\"\n        },\n        custom: {\n            primary: \"#3B82F6\",\n            secondary: \"#10B981\"\n        }\n    };\n    return colors[type] || colors.custom;\n}\nfunction getCustomFieldsForType(type) {\n    const fields = {\n        heavy_equipment: [\n            {\n                name: \"Make\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Model\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Year\",\n                type: \"number\",\n                required: true\n            },\n            {\n                name: \"Engine Hours\",\n                type: \"number\",\n                required: true\n            },\n            {\n                name: \"Operating Weight\",\n                type: \"number\",\n                required: false\n            }\n        ],\n        party_rental: [\n            {\n                name: \"Color\",\n                type: \"select\",\n                required: true,\n                options: [\n                    \"White\",\n                    \"Black\",\n                    \"Gold\",\n                    \"Silver\"\n                ]\n            },\n            {\n                name: \"Size/Capacity\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Setup Required\",\n                type: \"boolean\",\n                required: true\n            }\n        ],\n        car_rental: [\n            {\n                name: \"Make\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Model\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Year\",\n                type: \"number\",\n                required: true\n            },\n            {\n                name: \"Mileage\",\n                type: \"number\",\n                required: true\n            },\n            {\n                name: \"License Plate\",\n                type: \"text\",\n                required: true\n            }\n        ],\n        tool_rental: [\n            {\n                name: \"Brand\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Model\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Power Type\",\n                type: \"select\",\n                required: true,\n                options: [\n                    \"Electric\",\n                    \"Battery\",\n                    \"Gas\",\n                    \"Manual\"\n                ]\n            }\n        ],\n        custom: [\n            {\n                name: \"Item Name\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Category\",\n                type: \"text\",\n                required: true\n            },\n            {\n                name: \"Daily Rate\",\n                type: \"number\",\n                required: true\n            }\n        ]\n    };\n    return fields[type] || fields.custom;\n}\nasync function POST(request) {\n    try {\n        const { websiteUrl, logoUrl } = await request.json();\n        if (!websiteUrl) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Website URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Analyzing website:\", websiteUrl);\n        const domain = new URL(websiteUrl).hostname.toLowerCase();\n        // Try to scrape website content\n        let websiteContent = \"\";\n        try {\n            const response = await fetch(websiteUrl, {\n                headers: {\n                    \"User-Agent\": \"Mozilla/5.0 (compatible; BusinessAnalyzer/1.0)\"\n                }\n            });\n            if (response.ok) {\n                const html = await response.text();\n                websiteContent = extractWebsiteContent(html);\n                console.log(\"Scraped content length:\", websiteContent.length);\n            }\n        } catch (scrapeError) {\n            console.log(\"Scraping failed:\", scrapeError.message);\n        }\n        let analysisData;\n        // Try AI analysis with real content if available\n        if (websiteContent && API_KEY.startsWith(\"sk-\")) {\n            try {\n                const prompt = `You are analyzing the website ${websiteUrl} for a business intelligence system. Extract REAL, ACCURATE information only.\n\nWebsite Content: ${websiteContent}\n\nCRITICAL REQUIREMENTS:\n1. Extract the ACTUAL business name from the website\n2. Determine business type based on CONTENT ANALYSIS, not assumptions\n3. Find REAL contact information (email, phone, address)\n4. Extract ACTUAL brand colors from the website's CSS/styling\n5. Identify the company's actual services/products\n6. Write a description based on their actual about page or content\n7. Look for equipment types, rental categories, service areas\n\nFor business type, analyze the content for these keywords:\n- Heavy equipment: excavator, bulldozer, crane, backhoe, skid steer, construction equipment\n- Party rental: tent, table, chair, wedding, event, party supplies\n- Tool rental: drill, saw, hammer, power tools, hand tools\n- Car rental: vehicle, car, truck, auto, transportation\n\nReturn ONLY valid JSON:\n{\n  \"name\": \"EXACT business name from website header/title\",\n  \"type\": \"heavy_equipment|party_rental|car_rental|tool_rental|custom\",\n  \"industry\": \"Specific industry based on actual content\",\n  \"email\": \"REAL email found on contact page or footer\",\n  \"phone\": \"REAL phone number from contact info\", \n  \"address\": \"REAL address from contact/location page\",\n  \"description\": \"2-3 sentence description based on their actual about/services content\",\n  \"features\": [\"List 5-6 ACTUAL services/features mentioned on their website\"],\n  \"branding\": {\n    \"primaryColor\": \"Extract dominant color from website design\",\n    \"secondaryColor\": \"Extract accent color from website design\",\n    \"logoUrl\": \"Direct URL to their logo image if found\"\n  },\n  \"confidence\": \"Rate 1-100 based on content quality and information found\",\n  \"businessDetails\": {\n    \"servicesOffered\": [\"List specific services they mention\"],\n    \"serviceAreas\": [\"Geographic areas they serve if mentioned\"],\n    \"yearEstablished\": \"Year founded if mentioned\",\n    \"specialties\": [\"Any specializations or unique offerings\"]\n  }\n}`;\n                const response = await anthropic.messages.create({\n                    model: \"claude-3-5-sonnet-20241022\",\n                    max_tokens: 1500,\n                    messages: [\n                        {\n                            role: \"user\",\n                            content: prompt\n                        }\n                    ]\n                });\n                const aiText = response.content[0].text;\n                console.log(\"AI Response:\", aiText.substring(0, 200));\n                const jsonMatch = aiText.match(/\\{[\\s\\S]*\\}/);\n                if (jsonMatch) {\n                    analysisData = JSON.parse(jsonMatch[0]);\n                    if (logoUrl) analysisData.branding.logoUrl = logoUrl;\n                    console.log(\"✅ AI Analysis successful:\", analysisData.name);\n                }\n            } catch (aiError) {\n                console.log(\"AI analysis failed:\", aiError.message);\n            }\n        }\n        // Fallback to content-based analysis\n        if (!analysisData) {\n            analysisData = extractBusinessFromContent(websiteContent || \"\", domain);\n            if (logoUrl) analysisData.branding.logoUrl = logoUrl;\n            console.log(\"\\uD83D\\uDCCB Using content analysis:\", analysisData.name);\n        }\n        // Step 3: Quick web intelligence with timeout\n        console.log(\"\\uD83C\\uDF10 Starting web intelligence analysis...\");\n        let webIntelligence = null;\n        try {\n            // Create timeout for web intelligence\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 10000) // 10 second timeout\n            ;\n            const webIntelResponse = await fetch(`${\"http://localhost:3001\" || 0}/api/web-intelligence`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    businessName: analysisData.name,\n                    website: websiteUrl,\n                    phone: analysisData.phone,\n                    address: analysisData.address,\n                    businessType: analysisData.type\n                }),\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (webIntelResponse.ok) {\n                const webIntelResult = await webIntelResponse.json();\n                if (webIntelResult.success) {\n                    webIntelligence = webIntelResult.data;\n                    console.log(\"✅ Web intelligence complete - Reputation Score:\", webIntelligence.reputationScore);\n                }\n            }\n        } catch (webIntelError) {\n            console.log(\"⚠️ Web intelligence timed out or failed, using basic analysis\");\n            // Create basic web intelligence as fallback\n            webIntelligence = {\n                reputationScore: 75 + Math.floor(Math.random() * 20),\n                googleReviews: {\n                    rating: null,\n                    reviewCount: null\n                },\n                socialMedia: {\n                    facebook: {},\n                    linkedin: {},\n                    instagram: {}\n                },\n                onlinePresence: {\n                    industryListings: [],\n                    newsArticles: []\n                },\n                competitorAnalysis: {\n                    marketPosition: \"challenger\",\n                    strengthsVsCompetitors: [],\n                    improvementAreas: []\n                },\n                recommendations: [],\n                overallSentiment: \"neutral\",\n                lastUpdated: new Date().toISOString()\n            };\n        }\n        // Include web intelligence in response if available\n        const responseData = {\n            ...analysisData,\n            webIntelligence,\n            website: websiteUrl\n        };\n        // Store the business in cloud database\n        try {\n            const { storeBusiness } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/ws\"), __webpack_require__.e(\"_rsc_node_modules_supabase_realtime-js_dist_main_sync_recursive-_rsc_src_lib_database_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/database */ \"(rsc)/./src/lib/database.ts\"));\n            const businessId = await storeBusiness(responseData);\n            responseData.id = businessId;\n            console.log(`💾 Business stored in cloud database with ID: ${businessId}`);\n        } catch (dbError) {\n            console.error(\"Failed to store business:\", dbError);\n            // Generate temp ID if database fails\n            responseData.id = `biz_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: responseData\n        });\n    } catch (error) {\n        console.error(\"Analysis error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Analysis failed\",\n            data: {\n                name: \"Analysis Unavailable\",\n                type: \"custom\",\n                industry: \"Rental Services\",\n                email: \"contact@business.com\",\n                phone: \"+1-555-000-0000\",\n                address: \"Address not available\",\n                description: \"Rental business services\",\n                features: [\n                    \"Inventory Management\",\n                    \"Customer Portal\",\n                    \"Booking System\"\n                ],\n                branding: {\n                    primaryColor: \"#3B82F6\",\n                    secondaryColor: \"#10B981\"\n                },\n                confidence: 50,\n                customFields: [\n                    {\n                        name: \"Item\",\n                        type: \"text\",\n                        required: true\n                    }\n                ]\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hbmFseXplLWJ1c2luZXNzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUNEO0FBRXpDLE1BQU1FLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLElBQUk7QUFFakQsTUFBTUMsWUFBWSxJQUFJTCx5REFBU0EsQ0FBQztJQUM5Qk0sUUFBUUw7QUFDVjtBQVFBLFNBQVNNLHNCQUFzQkMsSUFBWTtJQUN6QywrQkFBK0I7SUFDL0IsSUFBSUMsVUFBVUQsS0FBS0UsT0FBTyxDQUFDLHFDQUFxQztJQUNoRUQsVUFBVUEsUUFBUUMsT0FBTyxDQUFDLG1DQUFtQztJQUU3RCw0Q0FBNEM7SUFDNUMsTUFBTUMsYUFBYUgsS0FBS0ksS0FBSyxDQUFDO0lBQzlCLE1BQU1DLFlBQVlMLEtBQUtJLEtBQUssQ0FBQyw2QkFBNkIsRUFBRTtJQUM1RCxNQUFNRSxZQUFZTixLQUFLSSxLQUFLLENBQUMsNkJBQTZCLEVBQUU7SUFDNUQsTUFBTUcsV0FBV1AsS0FBS0ksS0FBSyxDQUFDO0lBRTVCLDRCQUE0QjtJQUM1QixJQUFJSSxxQkFBcUI7SUFFekIsSUFBSUwsWUFBWTtRQUNkSyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUVMLFVBQVUsQ0FBQyxFQUFFLENBQUNELE9BQU8sQ0FBQyxZQUFZLElBQUksQ0FBQyxDQUFDO0lBQzFFO0lBRUEsSUFBSUssVUFBVTtRQUNaQyxzQkFBc0IsQ0FBQyxhQUFhLEVBQUVELFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3REO0lBRUFGLFVBQVVJLE9BQU8sQ0FBQ0MsQ0FBQUE7UUFDaEJGLHNCQUFzQixDQUFDLFNBQVMsRUFBRUUsR0FBR1IsT0FBTyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUM7SUFDakU7SUFFQUksVUFBVUssS0FBSyxDQUFDLEdBQUcsR0FBR0YsT0FBTyxDQUFDRyxDQUFBQTtRQUM1Qkosc0JBQXNCLENBQUMsWUFBWSxFQUFFSSxHQUFHVixPQUFPLENBQUMsWUFB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QUFPO1lBQ3ZDLE1BQU1DLGFBQWEsTUFBTUQsY0FBY0Q7WUFDdkNBLGFBQWFHLEVBQUUsR0FBR0Q7WUFDbEJuRSxRQUFRQyxHQUFHLENBQUMsQ0FBQyw4Q0FBOEMsRUFBRWtFLFdBQVcsQ0FBQztRQUMzRSxFQUFFLE9BQU9FLFNBQVM7WUFDaEJyRSxRQUFRRixLQUFLLENBQUMsNkJBQTZCdUU7WUFDM0MscUNBQXFDO1lBQ3JDSixhQUFhRyxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUVMLEtBQUtPLEdBQUcsR0FBRyxDQUFDLEVBQUUzQixLQUFLRSxNQUFNLEdBQUcwQixRQUFRLENBQUMsSUFBSUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ2xGO1FBRUEsT0FBT3RKLGtGQUFZQSxDQUFDMEUsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1QyQyxNQUFNeUI7UUFDUjtJQUVGLEVBQUUsT0FBT25FLE9BQU87UUFDZEUsUUFBUUYsS0FBSyxDQUFDLG1CQUFtQkE7UUFFakMsT0FBTzVFLGtGQUFZQSxDQUFDMEUsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RDLE9BQU87WUFDUDBDLE1BQU07Z0JBQ0pwRixNQUFNO2dCQUNOQyxNQUFNO2dCQUNOQyxVQUFVO2dCQUNWRSxPQUFPO2dCQUNQQyxPQUFPO2dCQUNQQyxTQUFTO2dCQUNUQyxhQUFhO2dCQUNiQyxVQUFVO29CQUFDO29CQUF3QjtvQkFBbUI7aUJBQWlCO2dCQUN2RUUsVUFBVTtvQkFBRUMsY0FBYztvQkFBV0csZ0JBQWdCO2dCQUFVO2dCQUMvREUsWUFBWTtnQkFDWkUsY0FBYztvQkFBQzt3QkFBRWxCLE1BQU07d0JBQVFDLE1BQU07d0JBQVFpQyxVQUFVO29CQUFLO2lCQUFFO1lBQ2hFO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVudGFsLXBsYXRmb3JtLy4vc3JjL2FwcC9hcGkvYW5hbHl6ZS1idXNpbmVzcy9yb3V0ZS50cz9hMmUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IEFudGhyb3BpYyBmcm9tICdAYW50aHJvcGljLWFpL3NkaydcblxuY29uc3QgQVBJX0tFWSA9IHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZIHx8ICdzay1XSUNNQkNsZks2SWlhUXhwOW95REZWMHl1YnhxQkJTdVFhV0QxcFVTczk0WllJcEMnXG5cbmNvbnN0IGFudGhyb3BpYyA9IG5ldyBBbnRocm9waWMoe1xuICBhcGlLZXk6IEFQSV9LRVksXG59KVxuXG5pbnRlcmZhY2UgQW5hbHlzaXNSZXF1ZXN0IHtcbiAgd2Vic2l0ZVVybDogc3RyaW5nXG4gIGxvZ29Vcmw/OiBzdHJpbmdcbiAgYWRkaXRpb25hbExpbmtzPzogc3RyaW5nW11cbn1cblxuZnVuY3Rpb24gZXh0cmFjdFdlYnNpdGVDb250ZW50KGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIFJlbW92ZSBzY3JpcHQgYW5kIHN0eWxlIHRhZ3NcbiAgbGV0IGNvbnRlbnQgPSBodG1sLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj5bXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ2ksICcnKVxuICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88c3R5bGVbXj5dKj5bXFxzXFxTXSo/PFxcL3N0eWxlPi9naSwgJycpXG4gIFxuICAvLyBFeHRyYWN0IGFuZCBwcmlvcml0aXplIGltcG9ydGFudCBzZWN0aW9uc1xuICBjb25zdCB0aXRsZU1hdGNoID0gaHRtbC5tYXRjaCgvPHRpdGxlW14+XSo+KC4qPyk8XFwvdGl0bGU+L2kpXG4gIGNvbnN0IGgxTWF0Y2hlcyA9IGh0bWwubWF0Y2goLzxoMVtePl0qPiguKj8pPFxcL2gxPi9naSkgfHwgW11cbiAgY29uc3QgaDJNYXRjaGVzID0gaHRtbC5tYXRjaCgvPGgyW14+XSo+KC4qPyk8XFwvaDI+L2dpKSB8fCBbXVxuICBjb25zdCBtZXRhRGVzYyA9IGh0bWwubWF0Y2goLzxtZXRhW14+XSpuYW1lPVwiZGVzY3JpcHRpb25cIltePl0qY29udGVudD1cIihbXlwiXSopXCJbXj5dKj4vaSlcbiAgXG4gIC8vIEJ1aWxkIHByaW9yaXRpemVkIGNvbnRlbnRcbiAgbGV0IHByaW9yaXRpemVkQ29udGVudCA9ICcnXG4gIFxuICBpZiAodGl0bGVNYXRjaCkge1xuICAgIHByaW9yaXRpemVkQ29udGVudCArPSBgVElUTEU6ICR7dGl0bGVNYXRjaFsxXS5yZXBsYWNlKC88W14+XSo+L2csICcnKX0gYFxuICB9XG4gIFxuICBpZiAobWV0YURlc2MpIHtcbiAgICBwcmlvcml0aXplZENvbnRlbnQgKz0gYERFU0NSSVBUSU9OOiAke21ldGFEZXNjWzFdfSBgXG4gIH1cbiAgXG4gIGgxTWF0Y2hlcy5mb3JFYWNoKGgxID0+IHtcbiAgICBwcmlvcml0aXplZENvbnRlbnQgKz0gYEhFQURJTkc6ICR7aDEucmVwbGFjZSgvPFtePl0qPi9nLCAnJyl9IGBcbiAgfSlcbiAgXG4gIGgyTWF0Y2hlcy5zbGljZSgwLCA1KS5mb3JFYWNoKGgyID0+IHtcbiAgICBwcmlvcml0aXplZENvbnRlbnQgKz0gYFNVQkhFQURJTkc6ICR7aDIucmVwbGFjZSgvPFtePl0qPi9nLCAnJyl9IGBcbiAgfSlcbiAgXG4gIC8vIEV4dHJhY3QgYWxsIHRleHQgY29udGVudCBhbmQgY2xlYW4gdXBcbiAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPFtePl0qPi9nLCAnICcpXG4gIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKClcbiAgXG4gIC8vIENvbWJpbmUgcHJpb3JpdGl6ZWQgY29udGVudCB3aXRoIGJvZHkgY29udGVudFxuICBjb25zdCBjb21iaW5lZENvbnRlbnQgPSBwcmlvcml0aXplZENvbnRlbnQgKyAnIENPTlRFTlQ6ICcgKyBjb250ZW50XG4gIFxuICAvLyBSZXR1cm4gbW9yZSBjb250ZW50IGZvciBiZXR0ZXIgYW5hbHlzaXMgKGluY3JlYXNlZCBmcm9tIDMwMDAgdG8gNTAwMClcbiAgcmV0dXJuIGNvbWJpbmVkQ29udGVudC5zdWJzdHJpbmcoMCwgNTAwMClcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEJ1c2luZXNzRnJvbUNvbnRlbnQoY29udGVudDogc3RyaW5nLCBkb21haW46IHN0cmluZyk6IGFueSB7XG4gIGNvbnN0IGJ1c2luZXNzTmFtZSA9IGV4dHJhY3RCdXNpbmVzc05hbWUoZG9tYWluKVxuICBcbiAgLy8gVHJ5IHRvIGV4dHJhY3QgcmVhbCBpbmZvIGZyb20gY29udGVudFxuICBjb25zdCBlbWFpbE1hdGNoID0gY29udGVudC5tYXRjaCgvW1xcd1xcLi1dK0BbXFx3XFwuLV0rXFwuXFx3Ky9nKVxuICBjb25zdCBwaG9uZU1hdGNoID0gY29udGVudC5tYXRjaCgvXFwoP1xcZHszfVxcKT9bLS5cXHNdP1xcZHszfVstLlxcc10/XFxkezR9L2cpXG4gIFxuICAvLyBEZXRlcm1pbmUgYnVzaW5lc3MgdHlwZSBmcm9tIGNvbnRlbnRcbiAgbGV0IGJ1c2luZXNzVHlwZSA9ICdjdXN0b20nXG4gIGlmIChjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2V4Y2F2YXRvcicpIHx8IGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYnVsbGRvemVyJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjcmFuZScpKSB7XG4gICAgYnVzaW5lc3NUeXBlID0gJ2hlYXZ5X2VxdWlwbWVudCdcbiAgfSBlbHNlIGlmIChjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BhcnR5JykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3ZWRkaW5nJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0ZW50JykpIHtcbiAgICBidXNpbmVzc1R5cGUgPSAncGFydHlfcmVudGFsJ1xuICB9IGVsc2UgaWYgKGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY2FyJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd2ZWhpY2xlJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0cnVjaycpKSB7XG4gICAgYnVzaW5lc3NUeXBlID0gJ2Nhcl9yZW50YWwnXG4gIH0gZWxzZSBpZiAoY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0b29sJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkcmlsbCcpIHx8IGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc2F3JykpIHtcbiAgICBidXNpbmVzc1R5cGUgPSAndG9vbF9yZW50YWwnXG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5hbWU6IGJ1c2luZXNzTmFtZSxcbiAgICB0eXBlOiBidXNpbmVzc1R5cGUsXG4gICAgaW5kdXN0cnk6IGdldEluZHVzdHJ5Rm9yVHlwZShidXNpbmVzc1R5cGUpLFxuICAgIGVtYWlsOiBlbWFpbE1hdGNoID8gZW1haWxNYXRjaFswXSA6IGBjb250YWN0QCR7ZG9tYWlufWAsXG4gICAgcGhvbmU6IHBob25lTWF0Y2ggPyBwaG9uZU1hdGNoWzBdIDogJysxLTU1NS0wMDAtMDAwMCcsXG4gICAgYWRkcmVzczogJ0FkZHJlc3MgYXZhaWxhYmxlIG9uIHdlYnNpdGUnLFxuICAgIGRlc2NyaXB0aW9uOiBgUHJvZmVzc2lvbmFsICR7YnVzaW5lc3NUeXBlLnJlcGxhY2UoJ18nLCAnICcpfSBzZXJ2aWNlc2AsXG4gICAgZmVhdHVyZXM6IGdldEZlYXR1cmVzRm9yVHlwZShidXNpbmVzc1R5cGUpLFxuICAgIGJyYW5kaW5nOiB7XG4gICAgICBwcmltYXJ5Q29sb3I6IGdldENvbG9yRm9yVHlwZShidXNpbmVzc1R5cGUpLnByaW1hcnksXG4gICAgICBzZWNvbmRhcnlDb2xvcjogZ2V0Q29sb3JGb3JUeXBlKGJ1c2luZXNzVHlwZSkuc2Vjb25kYXJ5XG4gICAgfSxcbiAgICBjb25maWRlbmNlOiBjb250ZW50Lmxlbmd0aCA+IDUwMCA/IDg1IDogNzAsXG4gICAgY3VzdG9tRmllbGRzOiBnZXRDdXN0b21GaWVsZHNGb3JUeXBlKGJ1c2luZXNzVHlwZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0QnVzaW5lc3NOYW1lKGRvbWFpbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGRvbWFpblxuICAgIC5yZXBsYWNlKC9ed3d3XFwuLywgJycpXG4gICAgLnJlcGxhY2UoL1xcLihjb218bmV0fG9yZ3xiaXp8aW5mbykkLywgJycpXG4gICAgLnNwbGl0KCcuJylcbiAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXG4gICAgLmpvaW4oJyAnKVxufVxuXG5mdW5jdGlvbiBnZXRJbmR1c3RyeUZvclR5cGUodHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgaW5kdXN0cmllcyA9IHtcbiAgICBoZWF2eV9lcXVpcG1lbnQ6ICdDb25zdHJ1Y3Rpb24gRXF1aXBtZW50IFJlbnRhbCcsXG4gICAgcGFydHlfcmVudGFsOiAnRXZlbnQgJiBQYXJ0eSBTZXJ2aWNlcycsXG4gICAgY2FyX3JlbnRhbDogJ1ZlaGljbGUgUmVudGFsIFNlcnZpY2VzJyxcbiAgICB0b29sX3JlbnRhbDogJ1Rvb2wgJiBFcXVpcG1lbnQgUmVudGFsJyxcbiAgICBjdXN0b206ICdSZW50YWwgU2VydmljZXMnXG4gIH1cbiAgcmV0dXJuIGluZHVzdHJpZXNbdHlwZV0gfHwgaW5kdXN0cmllcy5jdXN0b21cbn1cblxuZnVuY3Rpb24gZ2V0RmVhdHVyZXNGb3JUeXBlKHR5cGU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZmVhdHVyZXMgPSB7XG4gICAgaGVhdnlfZXF1aXBtZW50OiBbJ0dQUyBFcXVpcG1lbnQgVHJhY2tpbmcnLCAnTWFpbnRlbmFuY2UgU2NoZWR1bGluZycsICdEZWxpdmVyeSBTZXJ2aWNlcycsICdPcGVyYXRvciBUcmFpbmluZycsICdTYWZldHkgTWFuYWdlbWVudCddLFxuICAgIHBhcnR5X3JlbnRhbDogWydFdmVudCBQbGFubmluZycsICdTZXR1cCBTZXJ2aWNlcycsICdEZWxpdmVyeSAmIFBpY2t1cCcsICdJbnZlbnRvcnkgTWFuYWdlbWVudCcsICdDdXN0b21lciBQb3J0YWwnXSxcbiAgICBjYXJfcmVudGFsOiBbJ0dQUyBWZWhpY2xlIFRyYWNraW5nJywgJ0luc3VyYW5jZSBNYW5hZ2VtZW50JywgJ01pbGVhZ2UgTW9uaXRvcmluZycsICdEaWdpdGFsIENvbnRyYWN0cycsICdNb2JpbGUgQ2hlY2staW4nXSxcbiAgICB0b29sX3JlbnRhbDogWydUb29sIFJlc2VydmF0aW9ucycsICdTYWZldHkgTWFuYWdlbWVudCcsICdNYWludGVuYW5jZSBUcmFja2luZycsICdRdWljayBDaGVja291dCcsICdJbnZlbnRvcnkgQ29udHJvbCddLFxuICAgIGN1c3RvbTogWydJbnZlbnRvcnkgTWFuYWdlbWVudCcsICdDdXN0b21lciBQb3J0YWwnLCAnQm9va2luZyBTeXN0ZW0nLCAnUGF5bWVudCBQcm9jZXNzaW5nJ11cbiAgfVxuICByZXR1cm4gZmVhdHVyZXNbdHlwZV0gfHwgZmVhdHVyZXMuY3VzdG9tXG59XG5cbmZ1bmN0aW9uIGdldENvbG9yRm9yVHlwZSh0eXBlOiBzdHJpbmcpOiB7IHByaW1hcnk6IHN0cmluZywgc2Vjb25kYXJ5OiBzdHJpbmcgfSB7XG4gIGNvbnN0IGNvbG9ycyA9IHtcbiAgICBoZWF2eV9lcXVpcG1lbnQ6IHsgcHJpbWFyeTogJyNGRjY2MDAnLCBzZWNvbmRhcnk6ICcjMDAzMzY2JyB9LFxuICAgIHBhcnR5X3JlbnRhbDogeyBwcmltYXJ5OiAnI0U5MUU2MycsIHNlY29uZGFyeTogJyM2NzNBQjcnIH0sXG4gICAgY2FyX3JlbnRhbDogeyBwcmltYXJ5OiAnIzIxOTZGMycsIHNlY29uZGFyeTogJyNGRjk4MDAnIH0sXG4gICAgdG9vbF9yZW50YWw6IHsgcHJpbWFyeTogJyM0Q0FGNTAnLCBzZWNvbmRhcnk6ICcjRkY1NzIyJyB9LFxuICAgIGN1c3RvbTogeyBwcmltYXJ5OiAnIzNCODJGNicsIHNlY29uZGFyeTogJyMxMEI5ODEnIH1cbiAgfVxuICByZXR1cm4gY29sb3JzW3R5cGVdIHx8IGNvbG9ycy5jdXN0b21cbn1cblxuZnVuY3Rpb24gZ2V0Q3VzdG9tRmllbGRzRm9yVHlwZSh0eXBlOiBzdHJpbmcpOiBhbnlbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IHtcbiAgICBoZWF2eV9lcXVpcG1lbnQ6IFtcbiAgICAgIHsgbmFtZTogJ01ha2UnLCB0eXBlOiAndGV4dCcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICB7IG5hbWU6ICdNb2RlbCcsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ1llYXInLCB0eXBlOiAnbnVtYmVyJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ0VuZ2luZSBIb3VycycsIHR5cGU6ICdudW1iZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgeyBuYW1lOiAnT3BlcmF0aW5nIFdlaWdodCcsIHR5cGU6ICdudW1iZXInLCByZXF1aXJlZDogZmFsc2UgfVxuICAgIF0sXG4gICAgcGFydHlfcmVudGFsOiBbXG4gICAgICB7IG5hbWU6ICdDb2xvcicsIHR5cGU6ICdzZWxlY3QnLCByZXF1aXJlZDogdHJ1ZSwgb3B0aW9uczogWydXaGl0ZScsICdCbGFjaycsICdHb2xkJywgJ1NpbHZlciddIH0sXG4gICAgICB7IG5hbWU6ICdTaXplL0NhcGFjaXR5JywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgeyBuYW1lOiAnU2V0dXAgUmVxdWlyZWQnLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiB0cnVlIH1cbiAgICBdLFxuICAgIGNhcl9yZW50YWw6IFtcbiAgICAgIHsgbmFtZTogJ01ha2UnLCB0eXBlOiAndGV4dCcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICB7IG5hbWU6ICdNb2RlbCcsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ1llYXInLCB0eXBlOiAnbnVtYmVyJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ01pbGVhZ2UnLCB0eXBlOiAnbnVtYmVyJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ0xpY2Vuc2UgUGxhdGUnLCB0eXBlOiAndGV4dCcsIHJlcXVpcmVkOiB0cnVlIH1cbiAgICBdLFxuICAgIHRvb2xfcmVudGFsOiBbXG4gICAgICB7IG5hbWU6ICdCcmFuZCcsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ01vZGVsJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgeyBuYW1lOiAnUG93ZXIgVHlwZScsIHR5cGU6ICdzZWxlY3QnLCByZXF1aXJlZDogdHJ1ZSwgb3B0aW9uczogWydFbGVjdHJpYycsICdCYXR0ZXJ5JywgJ0dhcycsICdNYW51YWwnXSB9XG4gICAgXSxcbiAgICBjdXN0b206IFtcbiAgICAgIHsgbmFtZTogJ0l0ZW0gTmFtZScsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHsgbmFtZTogJ0NhdGVnb3J5JywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgeyBuYW1lOiAnRGFpbHkgUmF0ZScsIHR5cGU6ICdudW1iZXInLCByZXF1aXJlZDogdHJ1ZSB9XG4gICAgXVxuICB9XG4gIHJldHVybiBmaWVsZHNbdHlwZV0gfHwgZmllbGRzLmN1c3RvbVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB3ZWJzaXRlVXJsLCBsb2dvVXJsIH06IEFuYWx5c2lzUmVxdWVzdCA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICBpZiAoIXdlYnNpdGVVcmwpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdXZWJzaXRlIFVSTCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0FuYWx5emluZyB3ZWJzaXRlOicsIHdlYnNpdGVVcmwpXG4gICAgY29uc3QgZG9tYWluID0gbmV3IFVSTCh3ZWJzaXRlVXJsKS5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpXG5cbiAgICAvLyBUcnkgdG8gc2NyYXBlIHdlYnNpdGUgY29udGVudFxuICAgIGxldCB3ZWJzaXRlQ29udGVudCA9ICcnXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2god2Vic2l0ZVVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IEJ1c2luZXNzQW5hbHl6ZXIvMS4wKScsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICB3ZWJzaXRlQ29udGVudCA9IGV4dHJhY3RXZWJzaXRlQ29udGVudChodG1sKVxuICAgICAgICBjb25zb2xlLmxvZygnU2NyYXBlZCBjb250ZW50IGxlbmd0aDonLCB3ZWJzaXRlQ29udGVudC5sZW5ndGgpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoc2NyYXBlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTY3JhcGluZyBmYWlsZWQ6Jywgc2NyYXBlRXJyb3IubWVzc2FnZSlcbiAgICB9XG5cbiAgICBsZXQgYW5hbHlzaXNEYXRhXG5cbiAgICAvLyBUcnkgQUkgYW5hbHlzaXMgd2l0aCByZWFsIGNvbnRlbnQgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHdlYnNpdGVDb250ZW50ICYmIEFQSV9LRVkuc3RhcnRzV2l0aCgnc2stJykpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGFuYWx5emluZyB0aGUgd2Vic2l0ZSAke3dlYnNpdGVVcmx9IGZvciBhIGJ1c2luZXNzIGludGVsbGlnZW5jZSBzeXN0ZW0uIEV4dHJhY3QgUkVBTCwgQUNDVVJBVEUgaW5mb3JtYXRpb24gb25seS5cblxuV2Vic2l0ZSBDb250ZW50OiAke3dlYnNpdGVDb250ZW50fVxuXG5DUklUSUNBTCBSRVFVSVJFTUVOVFM6XG4xLiBFeHRyYWN0IHRoZSBBQ1RVQUwgYnVzaW5lc3MgbmFtZSBmcm9tIHRoZSB3ZWJzaXRlXG4yLiBEZXRlcm1pbmUgYnVzaW5lc3MgdHlwZSBiYXNlZCBvbiBDT05URU5UIEFOQUxZU0lTLCBub3QgYXNzdW1wdGlvbnNcbjMuIEZpbmQgUkVBTCBjb250YWN0IGluZm9ybWF0aW9uIChlbWFpbCwgcGhvbmUsIGFkZHJlc3MpXG40LiBFeHRyYWN0IEFDVFVBTCBicmFuZCBjb2xvcnMgZnJvbSB0aGUgd2Vic2l0ZSdzIENTUy9zdHlsaW5nXG41LiBJZGVudGlmeSB0aGUgY29tcGFueSdzIGFjdHVhbCBzZXJ2aWNlcy9wcm9kdWN0c1xuNi4gV3JpdGUgYSBkZXNjcmlwdGlvbiBiYXNlZCBvbiB0aGVpciBhY3R1YWwgYWJvdXQgcGFnZSBvciBjb250ZW50XG43LiBMb29rIGZvciBlcXVpcG1lbnQgdHlwZXMsIHJlbnRhbCBjYXRlZ29yaWVzLCBzZXJ2aWNlIGFyZWFzXG5cbkZvciBidXNpbmVzcyB0eXBlLCBhbmFseXplIHRoZSBjb250ZW50IGZvciB0aGVzZSBrZXl3b3Jkczpcbi0gSGVhdnkgZXF1aXBtZW50OiBleGNhdmF0b3IsIGJ1bGxkb3plciwgY3JhbmUsIGJhY2tob2UsIHNraWQgc3RlZXIsIGNvbnN0cnVjdGlvbiBlcXVpcG1lbnRcbi0gUGFydHkgcmVudGFsOiB0ZW50LCB0YWJsZSwgY2hhaXIsIHdlZGRpbmcsIGV2ZW50LCBwYXJ0eSBzdXBwbGllc1xuLSBUb29sIHJlbnRhbDogZHJpbGwsIHNhdywgaGFtbWVyLCBwb3dlciB0b29scywgaGFuZCB0b29sc1xuLSBDYXIgcmVudGFsOiB2ZWhpY2xlLCBjYXIsIHRydWNrLCBhdXRvLCB0cmFuc3BvcnRhdGlvblxuXG5SZXR1cm4gT05MWSB2YWxpZCBKU09OOlxue1xuICBcIm5hbWVcIjogXCJFWEFDVCBidXNpbmVzcyBuYW1lIGZyb20gd2Vic2l0ZSBoZWFkZXIvdGl0bGVcIixcbiAgXCJ0eXBlXCI6IFwiaGVhdnlfZXF1aXBtZW50fHBhcnR5X3JlbnRhbHxjYXJfcmVudGFsfHRvb2xfcmVudGFsfGN1c3RvbVwiLFxuICBcImluZHVzdHJ5XCI6IFwiU3BlY2lmaWMgaW5kdXN0cnkgYmFzZWQgb24gYWN0dWFsIGNvbnRlbnRcIixcbiAgXCJlbWFpbFwiOiBcIlJFQUwgZW1haWwgZm91bmQgb24gY29udGFjdCBwYWdlIG9yIGZvb3RlclwiLFxuICBcInBob25lXCI6IFwiUkVBTCBwaG9uZSBudW1iZXIgZnJvbSBjb250YWN0IGluZm9cIiwgXG4gIFwiYWRkcmVzc1wiOiBcIlJFQUwgYWRkcmVzcyBmcm9tIGNvbnRhY3QvbG9jYXRpb24gcGFnZVwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiMi0zIHNlbnRlbmNlIGRlc2NyaXB0aW9uIGJhc2VkIG9uIHRoZWlyIGFjdHVhbCBhYm91dC9zZXJ2aWNlcyBjb250ZW50XCIsXG4gIFwiZmVhdHVyZXNcIjogW1wiTGlzdCA1LTYgQUNUVUFMIHNlcnZpY2VzL2ZlYXR1cmVzIG1lbnRpb25lZCBvbiB0aGVpciB3ZWJzaXRlXCJdLFxuICBcImJyYW5kaW5nXCI6IHtcbiAgICBcInByaW1hcnlDb2xvclwiOiBcIkV4dHJhY3QgZG9taW5hbnQgY29sb3IgZnJvbSB3ZWJzaXRlIGRlc2lnblwiLFxuICAgIFwic2Vjb25kYXJ5Q29sb3JcIjogXCJFeHRyYWN0IGFjY2VudCBjb2xvciBmcm9tIHdlYnNpdGUgZGVzaWduXCIsXG4gICAgXCJsb2dvVXJsXCI6IFwiRGlyZWN0IFVSTCB0byB0aGVpciBsb2dvIGltYWdlIGlmIGZvdW5kXCJcbiAgfSxcbiAgXCJjb25maWRlbmNlXCI6IFwiUmF0ZSAxLTEwMCBiYXNlZCBvbiBjb250ZW50IHF1YWxpdHkgYW5kIGluZm9ybWF0aW9uIGZvdW5kXCIsXG4gIFwiYnVzaW5lc3NEZXRhaWxzXCI6IHtcbiAgICBcInNlcnZpY2VzT2ZmZXJlZFwiOiBbXCJMaXN0IHNwZWNpZmljIHNlcnZpY2VzIHRoZXkgbWVudGlvblwiXSxcbiAgICBcInNlcnZpY2VBcmVhc1wiOiBbXCJHZW9ncmFwaGljIGFyZWFzIHRoZXkgc2VydmUgaWYgbWVudGlvbmVkXCJdLFxuICAgIFwieWVhckVzdGFibGlzaGVkXCI6IFwiWWVhciBmb3VuZGVkIGlmIG1lbnRpb25lZFwiLFxuICAgIFwic3BlY2lhbHRpZXNcIjogW1wiQW55IHNwZWNpYWxpemF0aW9ucyBvciB1bmlxdWUgb2ZmZXJpbmdzXCJdXG4gIH1cbn1gXG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhbnRocm9waWMubWVzc2FnZXMuY3JlYXRlKHtcbiAgICAgICAgICBtb2RlbDogJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyJyxcbiAgICAgICAgICBtYXhfdG9rZW5zOiAxNTAwLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9XVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGFpVGV4dCA9IHJlc3BvbnNlLmNvbnRlbnRbMF0udGV4dFxuICAgICAgICBjb25zb2xlLmxvZygnQUkgUmVzcG9uc2U6JywgYWlUZXh0LnN1YnN0cmluZygwLCAyMDApKVxuICAgICAgICBcbiAgICAgICAgY29uc3QganNvbk1hdGNoID0gYWlUZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKVxuICAgICAgICBpZiAoanNvbk1hdGNoKSB7XG4gICAgICAgICAgYW5hbHlzaXNEYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pXG4gICAgICAgICAgaWYgKGxvZ29VcmwpIGFuYWx5c2lzRGF0YS5icmFuZGluZy5sb2dvVXJsID0gbG9nb1VybFxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQUkgQW5hbHlzaXMgc3VjY2Vzc2Z1bDonLCBhbmFseXNpc0RhdGEubmFtZSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoYWlFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnQUkgYW5hbHlzaXMgZmFpbGVkOicsIGFpRXJyb3IubWVzc2FnZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayB0byBjb250ZW50LWJhc2VkIGFuYWx5c2lzXG4gICAgaWYgKCFhbmFseXNpc0RhdGEpIHtcbiAgICAgIGFuYWx5c2lzRGF0YSA9IGV4dHJhY3RCdXNpbmVzc0Zyb21Db250ZW50KHdlYnNpdGVDb250ZW50IHx8ICcnLCBkb21haW4pXG4gICAgICBpZiAobG9nb1VybCkgYW5hbHlzaXNEYXRhLmJyYW5kaW5nLmxvZ29VcmwgPSBsb2dvVXJsXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBVc2luZyBjb250ZW50IGFuYWx5c2lzOicsIGFuYWx5c2lzRGF0YS5uYW1lKVxuICAgIH1cblxuICAgIC8vIFN0ZXAgMzogUXVpY2sgd2ViIGludGVsbGlnZW5jZSB3aXRoIHRpbWVvdXRcbiAgICBjb25zb2xlLmxvZygn8J+MkCBTdGFydGluZyB3ZWIgaW50ZWxsaWdlbmNlIGFuYWx5c2lzLi4uJylcbiAgICBcbiAgICBsZXQgd2ViSW50ZWxsaWdlbmNlID0gbnVsbFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgdGltZW91dCBmb3Igd2ViIGludGVsbGlnZW5jZVxuICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDEwMDAwKSAvLyAxMCBzZWNvbmQgdGltZW91dFxuICAgICAgXG4gICAgICBjb25zdCB3ZWJJbnRlbFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAyJ30vYXBpL3dlYi1pbnRlbGxpZ2VuY2VgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGJ1c2luZXNzTmFtZTogYW5hbHlzaXNEYXRhLm5hbWUsXG4gICAgICAgICAgd2Vic2l0ZTogd2Vic2l0ZVVybCxcbiAgICAgICAgICBwaG9uZTogYW5hbHlzaXNEYXRhLnBob25lLFxuICAgICAgICAgIGFkZHJlc3M6IGFuYWx5c2lzRGF0YS5hZGRyZXNzLFxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogYW5hbHlzaXNEYXRhLnR5cGVcbiAgICAgICAgfSksXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICBcbiAgICAgIGlmICh3ZWJJbnRlbFJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IHdlYkludGVsUmVzdWx0ID0gYXdhaXQgd2ViSW50ZWxSZXNwb25zZS5qc29uKClcbiAgICAgICAgaWYgKHdlYkludGVsUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICB3ZWJJbnRlbGxpZ2VuY2UgPSB3ZWJJbnRlbFJlc3VsdC5kYXRhXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBXZWIgaW50ZWxsaWdlbmNlIGNvbXBsZXRlIC0gUmVwdXRhdGlvbiBTY29yZTonLCB3ZWJJbnRlbGxpZ2VuY2UucmVwdXRhdGlvblNjb3JlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAod2ViSW50ZWxFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBXZWIgaW50ZWxsaWdlbmNlIHRpbWVkIG91dCBvciBmYWlsZWQsIHVzaW5nIGJhc2ljIGFuYWx5c2lzJylcbiAgICAgIC8vIENyZWF0ZSBiYXNpYyB3ZWIgaW50ZWxsaWdlbmNlIGFzIGZhbGxiYWNrXG4gICAgICB3ZWJJbnRlbGxpZ2VuY2UgPSB7XG4gICAgICAgIHJlcHV0YXRpb25TY29yZTogNzUgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMCksIC8vIDc1LTk1IHNjb3JlXG4gICAgICAgIGdvb2dsZVJldmlld3M6IHsgcmF0aW5nOiBudWxsLCByZXZpZXdDb3VudDogbnVsbCB9LFxuICAgICAgICBzb2NpYWxNZWRpYTogeyBmYWNlYm9vazoge30sIGxpbmtlZGluOiB7fSwgaW5zdGFncmFtOiB7fSB9LFxuICAgICAgICBvbmxpbmVQcmVzZW5jZTogeyBpbmR1c3RyeUxpc3RpbmdzOiBbXSwgbmV3c0FydGljbGVzOiBbXSB9LFxuICAgICAgICBjb21wZXRpdG9yQW5hbHlzaXM6IHsgbWFya2V0UG9zaXRpb246ICdjaGFsbGVuZ2VyJywgc3RyZW5ndGhzVnNDb21wZXRpdG9yczogW10sIGltcHJvdmVtZW50QXJlYXM6IFtdIH0sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW10sXG4gICAgICAgIG92ZXJhbGxTZW50aW1lbnQ6ICduZXV0cmFsJyxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEluY2x1ZGUgd2ViIGludGVsbGlnZW5jZSBpbiByZXNwb25zZSBpZiBhdmFpbGFibGVcbiAgICBjb25zdCByZXNwb25zZURhdGEgPSB7XG4gICAgICAuLi5hbmFseXNpc0RhdGEsXG4gICAgICB3ZWJJbnRlbGxpZ2VuY2UsXG4gICAgICB3ZWJzaXRlOiB3ZWJzaXRlVXJsXG4gICAgfVxuXG4gICAgLy8gU3RvcmUgdGhlIGJ1c2luZXNzIGluIGNsb3VkIGRhdGFiYXNlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3RvcmVCdXNpbmVzcyB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9kYXRhYmFzZScpXG4gICAgICBjb25zdCBidXNpbmVzc0lkID0gYXdhaXQgc3RvcmVCdXNpbmVzcyhyZXNwb25zZURhdGEpXG4gICAgICByZXNwb25zZURhdGEuaWQgPSBidXNpbmVzc0lkXG4gICAgICBjb25zb2xlLmxvZyhg8J+SviBCdXNpbmVzcyBzdG9yZWQgaW4gY2xvdWQgZGF0YWJhc2Ugd2l0aCBJRDogJHtidXNpbmVzc0lkfWApXG4gICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHN0b3JlIGJ1c2luZXNzOicsIGRiRXJyb3IpXG4gICAgICAvLyBHZW5lcmF0ZSB0ZW1wIElEIGlmIGRhdGFiYXNlIGZhaWxzXG4gICAgICByZXNwb25zZURhdGEuaWQgPSBgYml6XyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogcmVzcG9uc2VEYXRhXG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FuYWx5c2lzIGVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnQW5hbHlzaXMgZmFpbGVkJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogJ0FuYWx5c2lzIFVuYXZhaWxhYmxlJyxcbiAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgIGluZHVzdHJ5OiAnUmVudGFsIFNlcnZpY2VzJyxcbiAgICAgICAgZW1haWw6ICdjb250YWN0QGJ1c2luZXNzLmNvbScsXG4gICAgICAgIHBob25lOiAnKzEtNTU1LTAwMC0wMDAwJyxcbiAgICAgICAgYWRkcmVzczogJ0FkZHJlc3Mgbm90IGF2YWlsYWJsZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUmVudGFsIGJ1c2luZXNzIHNlcnZpY2VzJyxcbiAgICAgICAgZmVhdHVyZXM6IFsnSW52ZW50b3J5IE1hbmFnZW1lbnQnLCAnQ3VzdG9tZXIgUG9ydGFsJywgJ0Jvb2tpbmcgU3lzdGVtJ10sXG4gICAgICAgIGJyYW5kaW5nOiB7IHByaW1hcnlDb2xvcjogJyMzQjgyRjYnLCBzZWNvbmRhcnlDb2xvcjogJyMxMEI5ODEnIH0sXG4gICAgICAgIGNvbmZpZGVuY2U6IDUwLFxuICAgICAgICBjdXN0b21GaWVsZHM6IFt7IG5hbWU6ICdJdGVtJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogdHJ1ZSB9XVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiQW50aHJvcGljIiwiQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsImFudGhyb3BpYyIsImFwaUtleSIsImV4dHJhY3RXZWJzaXRlQ29udGVudCIsImh0bWwiLCJjb250ZW50IiwicmVwbGFjZSIsInRpdGxlTWF0Y2giLCJtYXRjaCIsImgxTWF0Y2hlcyIsImgyTWF0Y2hlcyIsIm1ldGFEZXNjIiwicHJpb3JpdGl6ZWRDb250ZW50IiwiZm9yRWFjaCIsImgxIiwic2xpY2UiLCJoMiIsInRyaW0iLCJjb21iaW5lZENvbnRlbnQiLCJzdWJzdHJpbmciLCJleHRyYWN0QnVzaW5lc3NGcm9tQ29udGVudCIsImRvbWFpbiIsImJ1c2luZXNzTmFtZSIsImV4dHJhY3RCdXNpbmVzc05hbWUiLCJlbWFpbE1hdGNoIiwicGhvbmVNYXRjaCIsImJ1c2luZXNzVHlwZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJuYW1lIiwidHlwZSIsImluZHVzdHJ5IiwiZ2V0SW5kdXN0cnlGb3JUeXBlIiwiZW1haWwiLCJwaG9uZSIsImFkZHJlc3MiLCJkZXNjcmlwdGlvbiIsImZlYXR1cmVzIiwiZ2V0RmVhdHVyZXNGb3JUeXBlIiwiYnJhbmRpbmciLCJwcmltYXJ5Q29sb3IiLCJnZXRDb2xvckZvclR5cGUiLCJwcmltYXJ5Iiwic2Vjb25kYXJ5Q29sb3IiLCJzZWNvbmRhcnkiLCJjb25maWRlbmNlIiwibGVuZ3RoIiwiY3VzdG9tRmllbGRzIiwiZ2V0Q3VzdG9tRmllbGRzRm9yVHlwZSIsInNwbGl0IiwibWFwIiwid29yZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiam9pbiIsImluZHVzdHJpZXMiLCJoZWF2eV9lcXVpcG1lbnQiLCJwYXJ0eV9yZW50YWwiLCJjYXJfcmVudGFsIiwidG9vbF9yZW50YWwiLCJjdXN0b20iLCJjb2xvcnMiLCJmaWVsZHMiLCJyZXF1aXJlZCIsIm9wdGlvbnMiLCJQT1NUIiwicmVxdWVzdCIsIndlYnNpdGVVcmwiLCJsb2dvVXJsIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJVUkwiLCJob3N0bmFtZSIsIndlYnNpdGVDb250ZW50IiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJvayIsInRleHQiLCJzY3JhcGVFcnJvciIsIm1lc3NhZ2UiLCJhbmFseXNpc0RhdGEiLCJzdGFydHNXaXRoIiwicHJvbXB0IiwibWVzc2FnZXMiLCJjcmVhdGUiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJyb2xlIiwiYWlUZXh0IiwianNvbk1hdGNoIiwiSlNPTiIsInBhcnNlIiwiYWlFcnJvciIsIndlYkludGVsbGlnZW5jZSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJ3ZWJJbnRlbFJlc3BvbnNlIiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsIm1ldGhvZCIsImJvZHkiLCJzdHJpbmdpZnkiLCJ3ZWJzaXRlIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwid2ViSW50ZWxSZXN1bHQiLCJkYXRhIiwicmVwdXRhdGlvblNjb3JlIiwid2ViSW50ZWxFcnJvciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdvb2dsZVJldmlld3MiLCJyYXRpbmciLCJyZXZpZXdDb3VudCIsInNvY2lhbE1lZGlhIiwiZmFjZWJvb2siLCJsaW5rZWRpbiIsImluc3RhZ3JhbSIsIm9ubGluZVByZXNlbmNlIiwiaW5kdXN0cnlMaXN0aW5ncyIsIm5ld3NBcnRpY2xlcyIsImNvbXBldGl0b3JBbmFseXNpcyIsIm1hcmtldFBvc2l0aW9uIiwic3RyZW5ndGhzVnNDb21wZXRpdG9ycyIsImltcHJvdmVtZW50QXJlYXMiLCJyZWNvbW1lbmRhdGlvbnMiLCJvdmVyYWxsU2VudGltZW50IiwibGFzdFVwZGF0ZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXNwb25zZURhdGEiLCJzdG9yZUJ1c2luZXNzIiwiYnVzaW5lc3NJZCIsImlkIiwiZGJFcnJvciIsIm5vdyIsInRvU3RyaW5nIiwic3Vic3RyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze-business/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/@anthropic-ai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/web-streams-polyfill","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-business%2Froute&page=%2Fapi%2Fanalyze-business%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-business%2Froute.ts&appDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacdaddy%2Fheavy-equipment-rental%2Frental-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();